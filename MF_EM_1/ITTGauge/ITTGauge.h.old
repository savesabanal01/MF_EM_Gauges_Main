#pragma once

#include <Arduino.h>

class ITTGauge
{
public:
    ITTGauge(uint8_t Pin1, uint8_t Pin2);
    void begin();
    void attach(uint16_t Pin3, char *init);
    void detach();
    void set(int16_t messageID, char *setPoint);
    void update();
    bool    _initialised;
    uint8_t _pin1, _pin2, _pin3;
    

    // Variables
    float    ITT                  = 0;  // ITT Value from sim
    float    instrumentBrightness      = 255;  // Instrument Brightness Ratio from sim
    float    instrumentBrightnessRatio = 0;
    float    needleRotationAngle         = 0; // angle of rotation of needle based on the ITT

    float minGreenAngle = 0;
    float maxGreenAngle = 0;
    float minYellowAngle = 0;
    float maxYellowAngle = 0;
    float redLineAngle = 0;
    float startLimitsAngle = 0;

    float minGreenITT = 200;
    float maxGreenITT = 830;
    float minYellowITT = 830;
    float maxYellowITT = 850;
    float redlineITT = 850;
    float startLimitsITT = 1090;
    
    int oneValue = 0;
    int tenValue = 0;
    int hundredValue = 0;
    int thousandValue = 0;

    bool     powerSaveFlag             = false;
    uint8_t  backlight_pin             = 9;
    uint16_t instrumentX0              = 0;
    uint16_t instrumentY0              = 0;
    // bool     showLogo                  = true;

    // Function declarations
    float scaleValue(float x, float in_min, float in_max, float out_min, float out_max);
    void  setInstrumentBrightnessRatio(float ratio);
    void  setITT(float value);
    void  setPowerSave(bool enabled);
    void  drawGauge();
};